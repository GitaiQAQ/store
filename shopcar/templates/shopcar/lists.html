{% extends 'base.html' %}
{% block fixed_menu_class %}fixed_menu_class{%endblock%}
{% block pagetitle%}购物车{% endblock%} 
{% block css %} {% load staticfiles %}

<link href="/static/shopcar/css/shopcar.css" rel="stylesheet">

{% endblock %} 
{% block content %}

<div class="container">
    <div class="col-xs-12 container-car">
            <div class="car-title">我的购物车</div>
            <table class="shop-car">
                <!-- 列表标题 -->
                <tr class="wrap-border">
                    <td class="title-name" colspan="3">商品名称</td>
                    <td class="text-center">单价</td>
                    <td class="text-center">数量</td>
                    <td class="text-center">小计</td>
                    <td class="text-center">操作</td>
                </tr>
                <!-- 列表标题 end -->

            <!-- 购物车列表详情 -->
                {% if ruleitems %} {% for car in ruleitems %}
                <tr class="wrap-border car-list">

                <!-- 商品勾选 -->
                    <td class="check text-center"><input class="checked" type="checkbox"></td>
                <!-- 商品勾选 end -->

                <!--商品图 -->
                    <td class="img-wrap text-center">
                        <img class="img-rounded" src="{{mediaroot}}{{car.rule.product.thumbnail}}">
                    </td>
                <!--商品图 end -->

                <!-- 名称型号 -->
                    <td class="shop-msg">
                        <div class="carlist_name">{{car.rule.product.title|truncatechars:"20"}}
                        </div>
                        <div class="rule_content grey">规格：{{car.rule.name}}
                        </div>
                    </td>
                <!-- 名称型号 end -->

                <!-- 价格 -->
                    <td class="w159 text-center" carid="{{car.id}}">
                                <i class="fa fa-jpy" aria-hidden="true"></i>
                                <span class="carprice">{{car.rule.price}}</span>
                    </td>
                <!-- 价格 end -->

                <!-- 数量 -->
                    <td class="w159 text-center">
                                <span class="addition r-btn">＋</span>
                                <span class="carnum" ruleid="{{car.rule.id}}">{{car.quantity}}</span>
                                <span class="subtraction r-btn">－<span>
                    </td>
               <!-- 数量 end -->

               <!-- 小计 -->
                    <td class="w159 text-center">
                            <i class="fa fa-jpy" aria-hidden="true"></i>
                            <span class="small_sum"></span>
                    </td>
                <!-- 小计 emd -->

                    <td class="w159 text-center">
                            <div class="delete r-btn" ruleid="{{car.rule.id}}">×</div>
                         </td>
                    </tr>
                    
                    {% endfor %} {% else %} 购物车中没有物品 {%endif%}
            <!-- 购物车列表详情end -->
                </table>
    

            
        
            <!-- 结账按钮 -->
            <div class="col-xs-12 car-footer">
        
                    <div class="col-xs-3">
                            <input id="all_checked" type="checkbox">
                            全选丨<span id="all-delete" class="grey">删除选中的商品</span>
                    </div>
                    <div class="col-xs-6 text-right">
                        <div>已选&nbsp;<span class="fs18 nub-sum orange"></span>&nbsp;件商品</div>
                        <div  class="grey">共计<span class="nub-sum"></span>件商品</div>
                    </div>
                    <div class="pull-left sum-price">
                        <div>总价&nbsp;<span class="orange fs18">¥&nbsp;<span class="price sum_price"> 0.00</span></span>
                        </div>
                        <div class="grey">应付总额不含运费</div>
                    </div>
                    <div class="pull-right">
                            <a class="orange-bg common-btn" id="buy" href="javascript:; ">
                                立即支付
                            </a>
                    </div>
                    
        
                
            </div>
    </div>
</div>
 {% endblock %} {% block js %}
 <script type="text/javascript " src="/static/js/login.js "></script>
 <script type="text/javascript" src="/static/js/cookie.js"></script>
<script type="text/javascript" src="/static/shopcar/js/shopcar.js"></script>
<script>
    var sum = 0;
    {%if ruleitems %} {% for rule in ruleitems %}
    sum += {{ rule.rule.price }} * {{ rule.quantity }};
    {% endfor %}
    {% endif %}
    $('.sum_price').text(sum);
</script> {% endblock %}